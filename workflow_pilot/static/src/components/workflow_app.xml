<?xml version="1.0" encoding="utf-8"?>
<templates id="template" xml:space="preserve">
	<t t-name="workflow_pilot.workflow_app">
		<div class="workflow-app" t-att-class="state.isExecuting ? 'executing' : ''">
			<header class="header">
				<div class="header__logo">⚡ Workflow Builder</div>
				<div class="header__actions">
					<button class="btn btn--secondary" t-on-click="runWorkflow" t-att-disabled="state.isExecuting">
						<t t-if="state.isExecuting">⏳ Running...</t>
						<t t-else="">▶ Run</t>
					</button>
					<button class="btn btn--primary" t-on-click="exportWorkflow">Export JSON</button>
					<button class="btn btn--accent" t-on-click="clearWorkflow">Clear All</button>
				</div>
			</header>
			<NodePalette onAddNode="(type) => this.addNode(type)"/>
			<div class="editor-container">
				<div class="editor-canvas" t-ref="editorCanvas"/>
				<!-- Execution Log Panel -->
				<t t-if="state.showLog">
					<div class="log-panel">
						<div class="log-panel__header">
							<span>Execution Log</span>
							<button class="btn btn--small" t-on-click="() => state.showLog = false">×</button>
						</div>
						<div class="log-panel__content">
							<t t-foreach="state.logs" t-as="log" t-key="log_index">
								<div t-att-class="'log-entry log-entry--' + log.type">
									<span class="log-entry__time">
										<t t-esc="log.time"/>
									</span>
									<span class="log-entry__node">
										<t t-esc="log.node"/>
									</span>
									<span class="log-entry__message">
										<t t-esc="log.message"/>
									</span>
								</div>
							</t>
							<t t-if="state.executionResult">
								<div class="log-entry log-entry--result">
									<pre>
										<t t-esc="formatResult()"/>
									</pre>
								</div>
							</t>
						</div>
					</div>
				</t>
			</div>
			<!-- <PropertiesPanel node="state.selectedNode" onDelete="(id) => this.deleteNode(id)"/> -->
		</div>
	</t>
</templates>